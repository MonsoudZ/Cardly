<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
  <div class="sm:flex sm:items-center sm:justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Marketplace</h1>
      <p class="mt-2 text-sm text-gray-700">Browse cards for sale and trade from collectors</p>
    </div>
    <div class="mt-4 sm:mt-0">
      <%= form_with url: marketplace_path, method: :get, class: "flex space-x-2" do %>
        <%= select_tag :card_type, options_for_select([["All Types", ""], ["Pokemon", "pokemon"], ["MTG", "mtg"], ["Sports", "sports"], ["Yu-Gi-Oh", "yugioh"], ["Other", "other"]], params[:card_type]), class: "rounded-md border-gray-300 text-sm focus:border-rose-500 focus:ring-rose-500" %>
        <%= submit_tag "Filter", class: "rounded-md bg-rose-600 px-3 py-2 text-sm font-semibold text-white hover:bg-rose-500 cursor-pointer" %>
      <% end %>
    </div>
  </div>

  <!-- For Sale Section -->
  <div class="mt-10">
    <h2 class="text-lg font-semibold text-gray-900 flex items-center">
      <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800 mr-2">For Sale</span>
      Cards Available for Purchase
    </h2>
    <% if @items_for_sale.any? %>
      <div class="mt-4 grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        <% @items_for_sale.each do |item| %>
          <div class="overflow-hidden rounded-lg bg-white shadow hover:shadow-lg transition-shadow">
            <% if item.card.image_url.present? %>
              <img src="<%= item.card.image_url %>" alt="<%= item.card.name %>" class="h-48 w-full object-cover">
            <% else %>
              <div class="h-48 w-full bg-gray-100 flex items-center justify-center">
                <span class="text-gray-400 text-sm">No Image</span>
              </div>
            <% end %>
            <div class="p-4">
              <h3 class="font-semibold text-gray-900"><%= item.card.name %></h3>
              <p class="text-sm text-gray-500"><%= item.card.set_name %> #<%= item.card.card_number %></p>
              <div class="mt-2 flex items-center justify-between">
                <span class="inline-flex items-center rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 capitalize"><%= item.card.card_type %></span>
                <span class="text-sm text-gray-500"><%= item.display_condition %></span>
              </div>
              <div class="mt-3 flex items-center justify-between">
                <span class="text-lg font-bold text-rose-600"><%= number_to_currency(item.asking_price || item.card.estimated_value) %></span>
                <span class="text-xs text-gray-500">by <%= item.collection.user.display_name %></span>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="mt-4 text-center py-8 bg-white rounded-lg shadow">
        <p class="text-sm text-gray-500">No cards currently for sale.</p>
      </div>
    <% end %>
  </div>

  <!-- For Trade Section -->
  <div class="mt-10">
    <h2 class="text-lg font-semibold text-gray-900 flex items-center">
      <span class="inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800 mr-2">For Trade</span>
      Cards Available for Trading
    </h2>
    <% if @items_for_trade.any? %>
      <div class="mt-4 grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        <% @items_for_trade.each do |item| %>
          <div class="overflow-hidden rounded-lg bg-white shadow hover:shadow-lg transition-shadow">
            <% if item.card.image_url.present? %>
              <img src="<%= item.card.image_url %>" alt="<%= item.card.name %>" class="h-48 w-full object-cover">
            <% else %>
              <div class="h-48 w-full bg-gray-100 flex items-center justify-center">
                <span class="text-gray-400 text-sm">No Image</span>
              </div>
            <% end %>
            <div class="p-4">
              <h3 class="font-semibold text-gray-900"><%= item.card.name %></h3>
              <p class="text-sm text-gray-500"><%= item.card.set_name %> #<%= item.card.card_number %></p>
              <div class="mt-2 flex items-center justify-between">
                <span class="inline-flex items-center rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 capitalize"><%= item.card.card_type %></span>
                <span class="text-sm text-gray-500"><%= item.display_condition %></span>
              </div>
              <div class="mt-3 flex items-center justify-between">
                <span class="text-sm text-gray-600">Est. <%= number_to_currency(item.card.estimated_value) %></span>
                <span class="text-xs text-gray-500">by <%= item.collection.user.display_name %></span>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="mt-4 text-center py-8 bg-white rounded-lg shadow">
        <p class="text-sm text-gray-500">No cards currently available for trade.</p>
      </div>
    <% end %>
  </div>
</div>
