<%#
  Stat Card Component

  Usage:
    <%= render 'shared/components/stat_card',
        label: 'Total Balance',
        value: number_to_currency(1234.56) %>

    <%= render 'shared/components/stat_card',
        label: 'Gift Cards',
        value: 24,
        icon: 'gift',
        change: '+12%',
        change_positive: true %>

  Options:
    - label: Stat label (required)
    - value: Stat value (required)
    - icon: Icon name (optional)
    - change: Change indicator text (optional)
    - change_positive: true/false for change color
    - href: Link URL (optional, makes card clickable)
%>

<%
  label ||= 'Stat'
  value ||= 0
  icon ||= nil
  change ||= nil
  change_positive ||= true
  href ||= nil
  html_class ||= ''

  wrapper_classes = "bg-white rounded-card shadow-soft p-6 #{html_class}"
  wrapper_classes += " hover:shadow-card transition-shadow duration-300 cursor-pointer" if href.present?

  change_color = change_positive ? 'text-success-600' : 'text-danger-600'
%>

<% content = capture do %>
  <div class="flex items-start justify-between">
    <div>
      <p class="text-sm font-medium text-neutral-500"><%= label %></p>
      <p class="mt-2 text-3xl font-semibold text-neutral-900"><%= value %></p>

      <% if change.present? %>
        <p class="mt-2 text-sm <%= change_color %> flex items-center gap-1">
          <% if change_positive %>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
            </svg>
          <% else %>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
          <% end %>
          <%= change %>
        </p>
      <% end %>
    </div>

    <% if icon.present? %>
      <div class="p-3 rounded-soft bg-primary-50">
        <%= render 'shared/components/icon', name: icon, size: :lg, color: 'text-primary-500' %>
      </div>
    <% end %>
  </div>
<% end %>

<% if href.present? %>
  <%= link_to href, class: wrapper_classes do %>
    <%= content %>
  <% end %>
<% else %>
  <div class="<%= wrapper_classes %>">
    <%= content %>
  </div>
<% end %>
